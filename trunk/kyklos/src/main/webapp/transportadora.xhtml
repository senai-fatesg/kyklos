<?xml version="1.0" encoding="utf-8" ?>
<ui:composition template="template.xhtml" xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets"
   xmlns:a="http://www.ambientinformatica.com.br/jsf2" xmlns:p="http://primefaces.org/ui">

   <ui:define name="cabecalho">
      <style>
.ui-autocomplete-input {
   width: 170px !important;
}
</style>
   </ui:define>

   <ui:define name="corpo">

      <div class="screenHeader">
         <a:field spaceLeft="1%">
            <p:panelGrid id="gridTop" styleClass="semBorda">
               <p:row>
                  <p:column>
                     <p:commandButton value="Cadastrar" actionListener="#{TransportadoraControl.criarTransportadora}" update="formTransportadora" oncomplete="PF('formTransportadora').show();"
                        icon="ui-icon-plusthick" />
                  </p:column>
               </p:row>
            </p:panelGrid>
         </a:field>
      </div>

      <div class="contentField">
         <p:panel header="Buscar / Filtros" toggleable="true" id="filtrosjs" widgetVar="filtrosjs" toggleOrientation="vertical" icon="ui-icon-search">

            <p:panelGrid styleClass="semBorda" style="width:100%;">
               <p:row>
                  <p:column colspan="2" style="text-align: right; width:60%">
                  
                     <p:inputText id="textBox" class="searchBar" placeholder="Transportadora" update="@all" value="#{TransportadoraControl.buscaText}">
                     </p:inputText>
                     
                  </p:column>
                  <p:column colspan="2" style="text-align:left;">
                     <p:commandButton class="listaButton" actionListener="#{TransportadoraControl.listarTransportadoras}" ajax="false" value="Pesquisar" icon="ui-icon-search" update="@all" />
                  </p:column>
                  
               </p:row>
            </p:panelGrid>
		  </p:panel>
        <p:dataTable id="tableEstoque" value="#{TransportadoraControl.listaTransportadoras}" var="t" >
            <p:column headerText="Razão Social" >
               <h:outputText value="#{t.razaoSocial}" style="width:40%;" />
            </p:column>

            <p:column headerText="CPF/CNPJ">
               <h:outputText value="#{t.cpfCnpj}" style="width:15%;"  />
            </p:column>

            <p:column headerText="Endereço">
               <h:outputText value="#{t.endereco.numero}, #{t.endereco.logradouro} - #{t.endereco.bairro}" style="width:45%;"  />
            </p:column>
		</p:dataTable>
	</div>
	
	<div>
      <p:dialog  header="Cadastro de Transportadora" widgetVar="formTransportadora" id="formTransportadora" showEffect="puff" hideEffect="scale" width="700px" height="630px" resizable="false">
         <div id="topMenu" align="center">
            <a:field spaceLeft="1%">
               <p:panelGrid id="gridTopDialog" styleClass="semBorda">
                 
                  <p:row>
                     <p:column>
                        <p:commandButton value="Cancelar" icon="ui-icon-cancel" onclick="PF('formTransportadora').hide();"/>
                     </p:column>
                     <p:column>
                        <p:commandButton value="Limpar"  icon="ui-icon-trash" update="tabviewCadastroTransportadora" process="@this" actionListener="#{TransportadoraControl.limpar}"  />
                     </p:column>

                     <p:column>
                        <p:commandButton value="Salvar" actionListener="#{TransportadoraControl.salvarTransportadora}" update="formTransportadora" icon="ui-icon-disk" validateClient="true" />
                     </p:column>
                  </p:row>
                 
               </p:panelGrid>
            </a:field>
         </div>
         
         <a:newLine/>
         
         <p:tabView id="tabviewCadastroTransportadora" activeIndex="#{TransportadoraControl.activeIndex}" styleClass="semBorda" cache="true">
            <p:tab title="Geral">
              <p:panel header="Informações Gerais">
               <p:panelGrid styleClass="semBorda">
                  <p:row>
                     <p:column>
                        <h:outputText value="CPF/CNPJ" />
                        <a:newLine />
                        <p:inputText value="#{TransportadoraControl.cpfCnpjTransportadora}" placeholder="CPF/CNPJ" style="width:150px;"/>
                     </p:column>
                     <p:column>
                        <a:newLine />
                        <p:commandButton value="Consultar" actionListener="#{TransportadoraControl.consultarCpfCnpj}" icon="ui-icon-search" update="cadastroTransportadoraPanel"/>
                     </p:column>
                  </p:row>
                </p:panelGrid>
              <p:panelGrid   id="cadastroTransportadoraPanel" styleClass="semBorda" columns="3" style="width:100%;">
                  <p:row>
                     <p:column colspan="3">
                        <h:outputText value="Razão Social" />
                        <a:newLine />
                        <p:inputText value="#{TransportadoraControl.transportadora.razaoSocial}" placeholder="Razão Social" style="width:98%;"/>
                     </p:column>
                  </p:row>
                  <p:row>
                     <p:column colspan="3">
                        <h:outputText value="Fantasia" />
                        <a:newLine />
                        <p:inputText value="#{TransportadoraControl.transportadora.fantasia}" placeholder="Fantasia" style="width:98%;"/>
                     </p:column>
                  </p:row>
                  <p:row>
                     <p:column colspan="3">
                        <h:outputText value="Inscrição Estadual" />
                        <a:newLine />
                        <p:inputText value="#{TransportadoraControl.transportadora.inscricaoEstadual}" placeholder="Inscrição Estadual" style="width:98%;"/>
                     </p:column>
                  </p:row>
               </p:panelGrid>
             </p:panel>
             <p:panel header="Endereço">
               <p:panelGrid>
                  <p:row>
                     <p:column>
                        <h:outputText value="CEP"/>
                        <a:newLine />
                        <p:inputMask id="inputCepTransportadora" value="#{TransportadoraControl.cepTransportadora}" mask="99.999-999" style="width:150px;"/>
                     </p:column>
                     <p:column>
                        <a:newLine />
                        <p:commandButton value="Buscar" actionListener="#{TransportadoraControl.consultarCep}" icon="ui-icon-search" update="enderecoTransportadoraPanel"/>
                     </p:column>
                  </p:row>
                </p:panelGrid>
                <p:panelGrid id="enderecoTransportadoraPanel" columns="3" style="width:100%;">
                  <p:row>
                     <p:column>
                        <h:outputText value="Logradouro:"/>
                        <a:newLine />
                        <p:inputText id="logradouroTransportadora" disabled="true" value="#{TransportadoraControl.transportadora.endereco.logradouro}" style="width:98%;"/>
                     </p:column>
                   </p:row>
                   <p:row>
                     <p:column>
                        <h:outputText value="Nº:" />
                        <a:newLine />
                        <p:inputText id="numeroTransportadora" value="#{TransportadoraControl.transportadora.endereco.numero}" style="width: 40%;"/>
                     </p:column>
                  </p:row>
                  <p:row>
                     <p:column>
                        <h:outputText value="Bairro:"/>
                        <a:newLine />
                        <p:inputText id="bairroTransportadora" disabled="true" value="#{TransportadoraControl.transportadora.endereco.bairro}" style="width:98%;"/>
                     </p:column>
                  </p:row>
                  <p:row>
                     <p:column>
                        <h:outputText value="CEP:"/>
                        <a:newLine />
                        <p:inputText id="cepTransportadora" disabled="true" value="#{TransportadoraControl.transportadora.endereco.cep}" style="width: 98%;" />
                     </p:column>
                  </p:row>
                  <p:row>
                     <p:column colspan="2">
                        <h:outputText value="Complemento:" />
                        <a:newLine />
                        <p:inputText id="complementoTransportadora" value="#{TransportadoraControl.transportadora.endereco.complemento}" style="width:98%;"/>
                     </p:column>
                  </p:row>
                  <p:row>
                     <p:column>
                        <h:outputText value="Município:"/>
                        <a:newLine />
                        <p:inputText id="municipioTransportadora" disabled="true" value="#{TransportadoraControl.transportadora.endereco.municipio.descricao}" style="width:98%;"/>
                     </p:column>
                   </p:row>
                   <p:row>
                     <p:column>
                        <h:outputText value="UF:"/>
                        <a:newLine />
                        <p:inputText id="ufTransportadora" disabled="true" value="#{TransportadoraControl.transportadora.endereco.municipio.uf}" style="width: 40%;"/>
                     </p:column>
                  </p:row>
               </p:panelGrid>
             </p:panel>  
            </p:tab>
         </p:tabView>
      </p:dialog>
	</div>
   </ui:define>
</ui:composition>