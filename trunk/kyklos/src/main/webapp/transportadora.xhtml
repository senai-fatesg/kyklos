<?xml version="1.0" encoding="utf-8" ?>
<ui:composition template="template.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:a="http://www.ambientinformatica.com.br/jsf2"
	xmlns:p="http://primefaces.org/ui">
	<link href="css/estilo.css" rel="stylesheet" type="text/css" />

	<ui:define name="corpo">
		<p:panel id="pnlTransportadora" header="Transportadora" style="text-align:center">
			<p:toolbar>
				<p:toolbarGroup align="left">
					<p:commandButton value="Cadastrar" title="Nova Transportadora"
						icon="ui-icon-plusthick" actionListener="#{TransportadoraControl.criarTransportadora}"
						onsuccess="PF('transportadoraDialog').show();" update="panelGridTransportadoraInformacoes" />
				</p:toolbarGroup>
				<p:toolbarGroup align="right"> 
					<p:inputText id="inputFiltroGlobal" value="#{TransportadoraControl.buscaText}"
						placeholder="Pesquisar Transportadora" />
					<p:spacer width="5" height="0" />
					<p:commandButton id="cmdFiltroGlobal" icon="ui-icon-search"
						actionListener="#{TransportadoraControl.listarTransportadoras}" update="dataTableTransportadora" />
				</p:toolbarGroup>
			</p:toolbar>

			<p:dataTable id="dataTableTransportadora"
				value="#{TransportadoraControl.listaTransportadoras}" var="t"
				emptyMessage="Nenhum registro encontrado" paginator="true" rows="10">
				<p:outputLabel value="Transportadora " />

				<p:column headerText="Razão Social">
					<h:outputText value="#{t.razaoSocial}" />
				</p:column>
				<p:column headerText="CPF/CNPJ">
					<h:outputText value="#{t.cpfCnpj}" />
				</p:column>
				<p:column headerText="Endereço">
               		<h:outputText value="#{t.endereco.numero}, #{t.endereco.logradouro} - #{t.endereco.bairro}"/>
           	    </p:column>

				<p:column headerText="Ação" width="10%">
				<p:commandButton id="btnEditarRegistro" icon="ui-icon-pencil" oncomplete="PF('transportadoraDialog').show();"
                  update=":formCorpo:transportadoraDialog">
                  <f:setPropertyActionListener value="#{t}" target="#{TransportadoraControl.transportadora}" />
                </p:commandButton>
                </p:column>
				
				<f:facet name="footer">
					<p:outputLabel
						value="#{TransportadoraControl.tamanhoListaTransportadoras} Registro(s)" />
				</f:facet>
			</p:dataTable>
		</p:panel>

		<p:dialog header="Cadastro de Transportadora" widgetVar="transportadoraDialog" id="transportadoraDialog"
			resizable="false" modal="true" showEffect="puff" hideEffect="scale">
			<p:messages id="msgs-dialog" />
			
			<p:commandButton id="cmbCancelarTransportadora" value="Cancelar" icon="ui-icon-cancel" onclick="PF('transportadoraDialog').hide();"/>
			<p:commandButton id="cmbLimparTransportadora" value="Limpar" icon="ui-icon-trash" actionListener="#{TransportadoraControl.limpar}" update="panelGridTransportadora" />
			<p:commandButton id="cmbSalvarTransportadora" value="Salvar" icon="ui-icon-disk" actionListener="#{TransportadoraControl.salvarTransportadora}" update="panelGridTransportadora, pnlTransportadora" />
				
				<p:panel id="panelGridTransportadora">
					<p:panel header="Informações Gerais" >
						<p:panelGrid id="panelGridTransportadoraInformacoes" columns="3" >
							<p:column>
                        		<h:outputText value="CPF/CNPJ" />
                        			<a:newLine />
                        		<p:inputText id="cpfCnpj" style="text-transform:uppercase" value="#{TransportadoraControl.transportadora.cpfCnpj}" placeholder="CPF/CNPJ"/>
                		    	<p:commandButton value="Consultar" actionListener="#{TransportadoraControl.consultarCpfCnpj}" icon="ui-icon-search" update="panelGridTransportadoraInformacoes" />
                			</p:column>
                			<p:column>
								<p:outputLabel value="Razão Social" for="razaoSocial" />
								<p:inputText id="razaoSocial" style="text-transform:uppercase" size="60" maxlength="80" value="#{TransportadoraControl.transportadora.razaoSocial}" />
							</p:column>
							<p:column>
								<p:outputLabel value="Fantasia" for="fantasia" />
								<p:inputText id="fantasia" style="text-transform:uppercase" size="60" maxlength="80" value="#{TransportadoraControl.transportadora.fantasia}" />
							</p:column>
							<p:column>
								<p:outputLabel value="Inscrição Estadual" for="inscricaoEstadual" />
								<p:inputText id="inscricaoEstadual" style="text-transform:uppercase" size="18"
										 	 maxlength="20" value="#{TransportadoraControl.transportadora.inscricaoEstadual}" />
							</p:column>
					
						</p:panelGrid>
					</p:panel>
					
					<p:panel header="Endereço" >
						<p:panelGrid id="panelGridTransportadoraEndereco" columns="3" >
							<p:column>
                        		<h:outputText value="CEP" />
                        			<a:newLine />
                        		<p:inputMask id="inputCepTransportadora" value="#{TransportadoraControl.transportadora.endereco.cep}" mask="99.999-999" />
                		    	<p:commandButton value="Consultar" actionListener="#{TransportadoraControl.consultarCep}" icon="ui-icon-search" update="panelGridTransportadoraEndereco" />
                			</p:column>
                			<p:column>
								<p:outputLabel value="Logradouro"/>
								<p:inputText id="logradouroTransportadora" disabled="true" value="#{TransportadoraControl.transportadora.endereco.logradouro}" />
							</p:column>
							<p:column>
								<p:outputLabel value="Nº" />
								<p:inputText id="numeroTransportadora" value="#{TransportadoraControl.transportadora.endereco.numero}" />
							</p:column>
							<p:column>
								<p:outputLabel value="Bairro" />
								<p:inputText id="bairroTransportadora" disabled="true" value="#{TransportadoraControl.transportadora.endereco.bairro}" />
							</p:column>
							<p:column>
								<p:outputLabel value="Complemento" />
								<p:inputText id="complementoTransportadora" value="#{TransportadoraControl.transportadora.endereco.complemento}" />
							</p:column>
							<p:column>
								<p:outputLabel value="Município" />
								<p:inputText  id="municipioTransportadora" disabled="true" value="#{TransportadoraControl.transportadora.endereco.municipio.descricao}" />
							</p:column>
							<p:column>
								<p:outputLabel value="UF" />
								<p:inputText id="ufTransportadora" disabled="true" value="#{TransportadoraControl.transportadora.endereco.municipio.uf}" />
							</p:column>
					
						</p:panelGrid>
					</p:panel>
				</p:panel>
		</p:dialog>
	</ui:define>
</ui:composition>